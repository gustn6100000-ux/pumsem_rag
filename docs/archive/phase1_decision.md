# Phase 1: 규칙 추출기 강화 — 판단 자료

**작성일**: 2026-02-12
**목적**: 남은 Case E / F / 기타에 대한 구현 여부 판단

---

## 현황 요약

| 패턴 | 건수 | 규칙 추출 가능? | 구현 난이도 | 데이터 정확도 영향 |
| --- | ---: | :---: | :---: | :---: |
| ✅ **matrix (Case D)** | **50** | 구현 완료 | - | 🔴 높음 |
| 🟡 **multi_job (Case E)** | **40** | 가능 | 중 | 🟡 중간 |
| 🟡 **range_val (Case F)** | **170** | 일부 가능 | 하 | ⚪ 낮음 |
| ⚪ **numeric_unclassified** | **655** | 개별 분석 필요 | 상 | 🟡 중간 |
| ⚪ **material** | **25** | 가능 | 하 | ⚪ 낮음 |
| - **other (비수치)** | 1,134 | LLM 유지 | - | - |

---

## Case E: multi_job (40건)

### 테이블 구조
직종(인력) 키워드가 포함된 수치 테이블. 주로 **측량·지반조사** 계열.

### 샘플 1: 발파구간 1발 파쇄작업 인원 (section 3-2-5)
```
headers: ['작업종류', '발파구간_A급', '발파구간_B급', '발파구간_C급', 
          '기계구간_A급', '기계구간_B급', '기계구간_C급']
row[0]: {작업종류: '발파구간공(특별인부)', 발파구간_A급: 1.8, B급: 1.5, C급: 1.2, ...}
```
→ 행=직종, 열=구간별 등급. **기존 Case C(전치 테이블)와 유사** — 적은 수정으로 처리 가능.

### 샘플 2: GNSS 측량 기준점 측량 (section 9-1-1)
```
headers: ['작업 구분', '일수', '인원(1일당)×5열', '인원(합계)×3열', '비고']
row[0]: {작업 구분: '작업 구분', 일수: '일수', 인원(1일당): '인명', ...}  ← 메타행
row[1]: {작업 구분: '관측준비', 일수: '(15)', 인원(1일당): '-', ...}
```
→ D1 메타행 패턴과 유사하나, 열이 작업별이 아니라 **인원 구성**. 구조가 다름.

### 샘플 3: 4급 기준점 측량 (section 9-1-5)
```
headers: ['측량 구분', '단위', '인원(1일당)×5열', '인원(합계)×3열']
```
→ 샘플 2와 동일 패턴.

### 판단 포인트
- **40건 중 측량 계열이 다수** — 패턴이 반복적
- Case C 전치 테이블 로직 재활용 가능성 높음
- 단, 메타행 유무·열 구조가 제각각이라 **범용 파서 필요**

---

## Case F: range_val (170건)

### 테이블 구조
셀에 `16.5~25.1` 같은 **범위 값** 포함. 주로 **토공·지반** 계열 계수/할증표.

### 샘플 1: 숏크리트 (section 1-2-3)
```
headers: ['종 별', 'L', 'C']
row[0]: {종 별: '경암(풍화암)', L: '1.70~2.00', C: '1.30~1.50'}
row[1]: {종 별: '보통암(풍화안반)', L: '1.55~1.70', C: '1.20~1.40'}
총 13행
```
→ 이것은 **계수 참조 테이블** — WorkType에 직접 연결되지 않음.
→ 현재는 Note 엔티티로 저장하면 충분.

### 샘플 2: 단위중량 (section 1-2-4)
```
headers: ['종 별', '단위', '단위중량(kg/m³)', '비고']
row[0]: {종 별: '잡석', 단위: '편마암', 단위중량: '2,600~2,700', 비고: '자연상태'}
총 22행
```
→ 자재/토질 물성 참조 테이블. **품셈 수량과 무관**.

### 판단 포인트
- **170건 대부분이 참조용 계수 테이블** — 직접적인 공종-노무 관계가 아님
- 현재 LLM이 이를 Note로 처리해도 RAG 검색에 큰 영향 없음
- **구현 ROI가 매우 낮음**

---

## numeric_unclassified (655건)

### 테이블 구조
숫자 데이터가 있으나 위 패턴에 해당하지 않는 테이블.

### 샘플 1: 터널 굴착속도 (section 1-2-7)
```
headers: ['종류/구분', '적재용량(t)', '운반속도(m/hr)_보통', '_불량', '_부량']
row[0]: {종류: '인력운반', 적재용량: '1.5톤', 보통: 3000, 불량: 2500, 부량: 2000}
```
→ **장비 성능 테이블** — 참조 데이터

### 샘플 2: 경사 계수 (section 1-2-7)
```
headers: ['경사도', '%', '10', '20', '30', '40', ..., '90']
row[0]: {경사도: '경사도', %: '각도', 10: 6, 20: 11, ...}
row[1]: {경사도: '환산계수(K)', %: '환산계수', 10: 2, 20: 3, ...}
```
→ **단순 참조 계수** — 매트릭스 형태지만 공종-인력 관계 아님

### 판단 포인트
- **655건으로 최다**이나, 대부분 **참조 테이블** (장비 성능, 작업조건 계수, 환산표)
- 직접적인 공종-노무-수량 관계가 아닌 경우가 많음
- 전수 분석에 비용 대비 효과가 낮을 가능성 높음

---

## material (25건)

### 테이블 구조
자재 소요량 테이블

### 샘플: 안전관리비 (section 1-5-5)
```
headers: ['구분', '포크리프트율', '금속율', '보드율', '목재율', '합산비율']
row[0]: {구분: '경량건축', 포크리프트율: 0.032, 금속율: '-', 목재율: 0.003, ...}
```
→ Case B(name-spec-unit 패턴) 확장으로 처리 가능

### 판단 포인트
- 25건으로 소량, Case B 확장으로 쉽게 처리 가능
- 단, RAG 검색 영향도 낮음

---

## 💡 요약: ROI 매트릭스

```
                    구현 비용
                    낮음 ◀──────────────▶ 높음
                    │                      │
     높 ┌───────────┼──────────────────────┐
     음 │           │  Case D ✅ 완료      │
  데    │           │                      │
  이 ┌──┤  material │  Case E (multi_job)  │
  터 │  │  25건     │  40건                │
  정 │  │           │                      │
  확 ├──┼───────────┼──────────────────────┤
  도 │  │           │  numeric_unclassified│
  영 │  │ range_val │  655건               │
  향 │  │ 170건     │                      │
     │  │           │                      │
     낮 └───────────┴──────────────────────┘
     음
```

## 📌 추천 의사결정

| 선택지 | 범위 | 예상 효과 |
| --- | --- | --- |
| **A. Case D만 → Phase 2 직행** | 50건 매트릭스 해결 | 핵심 수치(SCH×구경) 정확도 확보. 나머지는 LLM 유지 |
| **B. Case D + E 후 Phase 2** | 50 + 40 = 90건 | 측량 계열까지 커버. 1~2시간 추가 작업 |
| **C. Case D + E + F + material** | 90 + 170 + 25 = 285건 | 참조 테이블까지 규칙화. 효과 대비 비용↑ |
| **D. 전부 + numeric 조사** | 285 + 655 = 940건 | 완전 커버. 하지만 655건 분석에 시간↑↑ |

> **추천: A 또는 B**
> - 핵심 데이터 정확도 영향은 Case D에서 대부분 해결됨
> - Case E(측량)는 비용 대비 효과 양호
> - Case F/numeric은 대부분 참조 테이블 → LLM으로도 충분
