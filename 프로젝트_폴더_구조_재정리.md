# 프로젝트 폴더 구조 재정리

> 작성일: 2026-02-14  
> 목적: Antigravity 프로젝트의 폴더 구조를 기능별로 재정리

---

## 최종 구조

```
Antigravity/
├── .agent/                          ← 워크플로, 스킬 (변경 없음)
│
├── pipeline/                        ← [기존: python_code] 품셈 데이터 파이프라인
│   ├── .env                         ← 환경변수
│   ├── key.json                     ← GCP 키
│   ├── phase1_preprocessing/        ← Step 1: 전처리 (섹션 분할, 테이블 파싱, 텍스트 클리닝, 청킹, 검증)
│   ├── phase1_output/               ← Step 1 출력 데이터
│   ├── phase2_extraction/           ← Step 2: 엔티티/관계 추출 (LLM 추출, 정규화, DB 적재, 임베딩)
│   ├── phase2_output/               ← Step 2 출력 데이터
│   ├── pdf_extractor/               ← PDF 추출기 (Gemini v33, GUI)
│   ├── toc_parser/                  ← 목차 파서 (toc_parsed.json 생성)
│   ├── download_file/               ← 원본 PDF 파일
│   ├── analysis/                    ← 품질 분석 스크립트
│   ├── sql/                         ← DB 스키마, 검색 함수 SQL
│   └── logs/                        ← 실행 로그
│
├── edge-function/                   ← Supabase Edge Function 소스
│   ├── index.ts                     ← 메인 핸들러 (원본 통합 112KB)
│   ├── clarify.ts                   ← 의도 분석, 그래프 명확화
│   ├── config.ts                    ← 환경변수, Supabase 클라이언트, CORS, Rate Limit
│   ├── context.ts                   ← LLM 컨텍스트 빌드
│   ├── embedding.ts                 ← Gemini 임베딩 생성
│   ├── graph.ts                     ← 그래프 확장, 일위대가, 청크 조회
│   ├── llm.ts                       ← 시스템 프롬프트, LLM 답변 생성
│   ├── search.ts                    ← 벡터/키워드/청크 검색
│   └── types.ts                     ← 공통 타입 정의
│
├── frontend/                        ← 챗봇 웹 UI
│   ├── index.html                   ← 챗봇 메인 페이지
│   ├── app.js                       ← 프론트엔드 로직
│   └── style.css                    ← 스타일
│
├── docs/                            ← 프로젝트 문서
│   ├── plans/                       ← 구현계획서, 실행계획서
│   ├── reports/                     ← 결과보고서, 검증보고서, 세션보고서
│   ├── reviews/                     ← 검토보고서, 비교분석, 진단서
│   ├── test-data/                   ← 테스트 JSON 파일
│   └── archive/                     ← 초기 개발 문서 (2026-02-09~11)
│
└── archive/                         ← 레거시 파일 보관
    └── n8n-legacy/                  ← 기존 n8n RAG 워크플로
```

---

## 파일 분류 기준

### docs 분류 패턴

| 이동 위치         | 파일명 패턴                                          |
| ----------------- | ---------------------------------------------------- |
| `docs/plans/`     | `*계획서.md`, `*계획.md`                             |
| `docs/reports/`   | `*보고서.md`, `*결과*.md`, `*세션*.md`, `*가이드.md` |
| `docs/reviews/`   | `*검토*.md`, `*비교*.md`, `*분석.md`, `*진단*.md`    |
| `docs/test-data/` | `test_*.json`                                        |
| `docs/archive/`   | `개발시 문서들/` 전체, `phase*_*.md`                 |

### 삭제 대상

| 분류           | 대상                                                                                |
| -------------- | ----------------------------------------------------------------------------------- |
| 중복 배포 폴더 | `deploy_temp/`, `tmp_deploy/`, `supabase/`, `python_code/sb_deploy/`                |
| 임시 스크립트  | `_backup*.py`, `_check*.py`, `_db_*.py`, `_test_*.py`, `_tmp_*.py`                  |
| 임시 결과      | `_tmp_result*.txt`, `_*_result.txt`, `_tc1_response.json`, `_edge_func_content.txt` |
| 캐시/핫픽스    | `__pycache__/`, `hotfix_transposed_tables.py`, `rag_server.py`, `test_rag.py`       |
| 외부 clone     | `antigravity-awesome-skills-temp/`                                                  |

---

## 배포 관련 참고

- 배포 소스 복사본: `C:\Users\lhs\sb_deploy\supabase\functions\rag-chat\` (로컬, 별도)
- 배포 워크플로: `.agent/workflows/deploy-edge-function.md`
- 소스 수정 시: `edge-function/` 수정 → `sb_deploy` 복사 → CLI 배포
